
<script>
  // PostHog
  !function (t, e) { var o, n, p, r; e.__SV || (window.posthog = e, e._i = [], e.init = function (i, s, a) { function g(t, e) { var o = e.split("."); 2 == o.length && (t = t[o[0]], e = o[1]), t[e] = function () { t.push([e].concat(Array.prototype.slice.call(arguments, 0))) } } (p = t.createElement("script")).type = "text/javascript", p.crossOrigin = "anonymous", p.async = !0, p.src = s.api_host.replace(".i.posthog.com", "-assets.i.posthog.com") + "/static/array.js", (r = t.getElementsByTagName("script")[0]).parentNode.insertBefore(p, r); var u = e; for (void 0 !== a ? u = e[a] = [] : a = "posthog", u.people = u.people || [], u.toString = function (t) { var e = "posthog"; return "posthog" !== a && (e += "." + a), t || (e += " (stub)"), e }, u.people.toString = function () { return u.toString(1) + ".people (stub)" }, o = "init Re Os As Pe Ms Fs capture Ve calculateEventProperties js register register_once register_for_session unregister unregister_for_session qs getFeatureFlag getFeatureFlagPayload isFeatureEnabled reloadFeatureFlags updateEarlyAccessFeatureEnrollment getEarlyAccessFeatures on onFeatureFlags onSurveysLoaded onSessionId getSurveys getActiveMatchingSurveys renderSurvey canRenderSurvey canRenderSurveyAsync identify setPersonProperties group resetGroups setPersonPropertiesForFlags resetPersonPropertiesForFlags setGroupPropertiesForFlags resetGroupPropertiesForFlags reset get_distinct_id getGroups get_session_id get_session_replay_url alias set_config startSessionRecording stopSessionRecording sessionRecordingStarted captureException loadToolbar get_property getSessionProperty zs Ls createPersonProfile Us Rs Bs opt_in_capturing opt_out_capturing has_opted_in_capturing has_opted_out_capturing clear_opt_in_out_capturing Ds debug I Ns getPageViewId captureTraceFeedback captureTraceMetric".split(" "), n = 0; n < o.length; n++)g(u, o[n]); e._i.push([i, s, a]) }, e.__SV = 1) }(document, window.posthog || []);
  posthog.init('phc_MrAAAWfjIrmzC8OHWp4uJWpv6lHCc4U2Hu8NDgyxCrl', {
    api_host: 'https://phte.groq.io', // your managed reverse proxy domain
    ui_host: 'https://us.i.posthog.com', // necessary because you're using a proxy, this way links will point back to PostHog properly
    defaults: '2025-05-24',
    person_profiles: 'identified_only', // or 'always' to create profiles for anonymous users as well
  })
</script>


<meta id="groqsters-pub-config"
  data-enabled="{{theme-setting 'published_enable_customizations'}}"
  data-hide-header="{{theme-setting 'published_hide_default_header'}}"
  data-menu-links="{{theme-setting 'published_menu_links'}}"
>


<script>
(function () {
  function isTrue(val) {
    return String(val).toLowerCase() === 'true';
  }

  function parseLinksSetting(linksSetting) {
    var links = [];
    if (!linksSetting) return links;
    linksSetting.split(',').forEach(function (entry) {
      var parts = entry.split('|');
      if (parts.length >= 2) {
        var text = (parts[0] || '').trim();
        var href = (parts[1] || '').trim();
        if (text && href) links.push({ text: text, href: href });
      }
    });
    return links;
  }

  function buildMenu(links) {
    var existing = document.querySelector('.groqsters-published-menu');
    if (existing) return existing;

    var container = document.createElement('nav');
    container.className = 'groqsters-published-menu';

    var inner = document.createElement('div');
    inner.className = 'groqsters-published-menu-inner';
    container.appendChild(inner);

    links.forEach(function (item) {
      var a = document.createElement('a');
      a.href = item.href;
      a.textContent = item.text;
      a.target = item.href.indexOf('http') === 0 ? '_blank' : '_self';
      inner.appendChild(a);
    });

    return container;
  }

  function injectMenu(links) {
    if (!links || !links.length) return;
    var menu = buildMenu(links);
    if (!menu) return;

    var header = document.querySelector('.published-page-header');
    if (header) {
      if (!header.nextSibling || header.nextSibling !== menu) {
        header.parentNode.insertBefore(menu, header.nextSibling);
      }
    } else {
      var mainWrap = document.querySelector('.wrap, .container, body');
      if (mainWrap && !document.querySelector('.groqsters-published-menu')) {
        mainWrap.insertBefore(menu, mainWrap.firstChild);
      }
    }
  }

  function applyHiding(hideHeader) {
    if (!hideHeader) return;
    var header = document.querySelector('.published-page-header');
    if (header) header.style.display = 'none';
  }

  function wireSpaNavigation(enabled, selector) {
    if (!enabled) return;
    var sel = selector || '.groqsters-published-menu a';
    document.addEventListener('click', function (event) {
      var path = event.composedPath ? event.composedPath() : [];
      var anchor = null;
      for (var i = 0; i < path.length; i++) {
        var el = path[i];
        if (el && el.tagName === 'A') { anchor = el; break; }
      }
      if (!anchor) {
        var t = event.target;
        if (t && t.closest) anchor = t.closest(sel);
      }
      if (!anchor || !anchor.matches(sel)) return;

      var href = anchor.getAttribute('href');
      if (!href) return;
      if (href.indexOf('http') === 0) return; // external

      event.preventDefault();
      window.history.pushState({}, '', href);
      var navEvent = new CustomEvent('groqsters:spa:navigate', { detail: { href: href } });
      window.dispatchEvent(navEvent);
    }, true);
  }

  function run() {
    if (!document.body || !document.body.classList.contains('published-page')) return;

    var el = document.getElementById('groqsters-pub-config');
    if (!el) return;

    var enabled = isTrue(el.dataset.enabled);
    if (!enabled) return;

    var hideHeader = isTrue(el.dataset.hideHeader);
    var links = parseLinksSetting(el.dataset.menuLinks || '');
    var counter = isTrue(el.dataset.counter);
    var galleryImages = el.dataset.galleryImages || '';
    var spaEnabled = isTrue(el.dataset.spaEnabled);
    var spaSelector = el.dataset.spaSelector || '.groqsters-published-menu a';

    try {
      applyHiding(hideHeader);
      injectMenu(links);
      injectCounterDemo(counter);
      injectGallery(galleryImages);
      wireSpaNavigation(spaEnabled, spaSelector);
      // Minimal debug for verification
      console.log('[groqsters] published page enhancements applied');
    } catch (e) {
      console.error('[groqsters] published init error', e);
    }
  }

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', run);
  } else {
    run();
  }
})();
</script>

